<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./src/css/base.css">
    <link rel="stylesheet" href="./src/css/login.css">
    <link rel="stylesheet" href="./src/css/toast.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Login</title>
    <script src="./src/js/validation.js"></script>
    <script src="./src/js/toast.js"></script>
</head>
<body>
    <div class="wrapper">
        <form action="" method="POST" id="form">
            <h3 class="form_header">SOIOT SYSTEM</h3>
            <div class="form-group">
                <input type="text" id="username" class="form_input" placeholder="Username" name="username">
                <span class="form-message"></span>
            </div>
            <div class="form-group">
                <input type="password" id="password" class="form_input" placeholder="Password" name="password">
                <span class="form-message"></span>
            </div>
            <div class="login_submit">
                <button type="submit" class="btn">LOGIN</button>
                <a href="" class="register">or create new account</a>
            </div>
        </form>
    </div>

    <div id="toast">
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // validate
            Validator({
                form: '#form',
                formGroupSelector: '.form-group',
                errorSelector: '.form-message',
                rules: [
                    Validator.isRequired('#username', 'Please enter your account name'),
                    Validator.minLength('#password', 4),
                ],
                onSubmit: function (data) {
                    var username = data.username;
                    var password = data.password;

                    if(username == "john" && password == "1234") {
                        showSuccessToast();
                        setTimeout(() => {
                            window.location.href = "./src/pages/dashboard.html";
                        }, 3000);
                    } else {

                        showErrorToast();
                    }
                    console.log(data);
                }
            });
        });
        
        function showSuccessToast() {
            toast({
                title: "Login Successful!",
                message: "Bạn đã đăng nhập thành công",
                type: "success",
                duration: 2000
            });
        }

        function showErrorToast() {
            toast({
                title: "Login Failed!",
                message: "Tài khoản hoặc mật khẩu của bạn chưa đúng",
                type: "error",
                duration: 2000
            });
        }
    </script>
</body>
</html>